@model Anotame.Models.Nota

@{
    ViewBag.Title = "Home Page";
    var fechaR = ViewBag.FechaRecibido;
}

@section miscss{
    <link href="~/Content/CssPrivate/Nota.css" rel="stylesheet" />
}

@section misjava{
    <script src="~/Scripts/PrivateJavascripts/jsNotaArreglo.js"></script>
    <script src="~/Scripts/PrivateJavascripts/jsNotaPrecio.js"></script>
    <script src="~/Scripts/PrivateJavascripts/jsNotaPrenda.js"></script>
    <script src="~/Scripts/PrivateJavascripts/jsNotaPrendaEdit.js"></script>
    <script src="~/Scripts/PrivateJavascripts/jsNotaClientes.js"></script>
    <script src="~/Scripts/PrivateJavascripts/jsNotaFecha.js"></script>
    <script src="~/Scripts/PrivateJavascripts/jsNotaSave.js"></script>
    <script src="~/Scripts/PrivateJavascripts/jsHome.js"></script>
}

@MyHelpers.Resultado(" ")

@using (Html.BeginForm("Create", "Nota", FormMethod.Post, new { @class = "form-group formulario-lote_veneno" }))
{
    @Html.AntiForgeryToken()
    <div class="form-horizontal">

        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
        <div id="divPrincipalNota" class="form-group row">
            <div class="form-row col-md-12" id="divEncabNota">
                <div class="form-group col-md-8" id="divLogoNota">
                    <h1>EL HILVÁN</h1>
                </div>
                <button type="button" id="btnFechaEdit" class="btn btn-primary col-1" data-toggle="modal" data-target="#EditFecha">
                    <i class="fas fa-calendar-alt notaicon fa-2x"></i>
                </button>
                <div class="col-md-1"></div>
                <div class="col-md-2" id="divFechaNota">
                    <div class="row">
                        <div class="col-md-4 text-center">
                            Día
                        </div>
                        <div class="col-md-4 text-center">
                            Mes
                        </div>
                        <div class="col-md-4 text-center">
                            Año
                        </div>
                    </div>
                    <div id="date" class="row">
                        <div class="col-md-4 text-center" id="dateDia">
                            -
                        </div>
                        <div class="col-md-4 text-center" id="dateMes">
                            -
                        </div>
                        <div class="col-md-4 text-center" id="dateAño">
                            -
                        </div>
                    </div>
                </div>
            </div>

            <div id="divFolio" class="text-center">
                Folio
                <label id="lblFolio">@ViewBag.folio</label>

                <div class="form-group col-md-10" style="display: none;">
                    @Html.LabelFor(model => model.Folio, "Folio:", htmlAttributes: new { @class = "control-label col-md-3" })
                    <div class="col-md-9">
                        @Html.EditorFor(model => model.Folio, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.Folio, "", new { @class = "text-danger" })
                    </div>
                </div>
            </div>

            <button type="button" id="btnClient" class="btn btn-primary" data-toggle="modal" data-target="#AddCliente">
                <i id="icoAdd" class="fas fa-user-circle notaicon fa-2x"></i>
            </button>

            <div id="divDataCliente" class="form-group row">
                <div class="form-row col-6">

                    <div id="divNomCliente" class="col-md-12 row">
                        @Html.LabelFor(model => model.Clientes.Nombre, "Nombre del Cliente:", htmlAttributes: new { @class = "control-label col-md-4" })
                        @Html.EditorFor(model => model.Clientes.Nombre, new { htmlAttributes = new { @class = "form-control col-md-8", @readOnly = true } })
                        @Html.ValidationMessageFor(model => model.Clientes.Nombre, "", new { @class = "text-danger" })
                    </div>

                    <div id="divDirCliente" class="col-md-12 row">
                        @Html.LabelFor(model => model.Clientes.Direccion, "Dirección del Cliente:", htmlAttributes: new { @class = "control-label col-md-4" })
                        @Html.EditorFor(model => model.Clientes.Direccion, new { htmlAttributes = new { @class = "form-control col-md-8", @readOnly = true } })
                        @Html.ValidationMessageFor(model => model.Clientes.Direccion, "", new { @class = "text-danger" })
                    </div>

                    <div id="divTelCliente" class="col-md-12 row">
                        @Html.LabelFor(model => model.Clientes.Telefono, "Teléfono del Cliente:", htmlAttributes: new { @class = "control-label col-md-4" })
                        @Html.EditorFor(model => model.Clientes.Telefono, new { htmlAttributes = new { @class = "form-control col-md-8", @readOnly = true } })
                        @Html.ValidationMessageFor(model => model.Clientes.Telefono, "", new { @class = "text-danger" })
                    </div>

                    <div id="divFechaEntrega" class="col-md-12 row">
                        @Html.LabelFor(model => model.FechaEntrega, "Fecha de Entrega:", htmlAttributes: new { @class = "control-label col-md-4" })
                        @Html.EditorFor(model => model.FechaEntrega, new { htmlAttributes = new { @class = "form-control col-md-8", @type = "date" } })
                        @Html.ValidationMessageFor(model => model.FechaEntrega, "", new { @class = "text-danger" })
                    </div>

                    @*Divs Ocultos*@
                    <div class="form-group col-md-12" style="display: none;">
                        @Html.LabelFor(model => model.idClientes, "id del Cliente:", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.idClientes, new { htmlAttributes = new { @class = "form-control", @readOnly = true } })
                            @Html.ValidationMessageFor(model => model.idClientes, "", new { @class = "text-danger" })
                        </div>
                    </div>

                    <div class="form-group col-md-10" style="display: none;">
                        @Html.LabelFor(model => model.FechaRecibido, "Fecha de Recibido:", htmlAttributes: new { @class = "control-label col-md-3" })
                        <div class="col-md-9">
                            @Html.EditorFor(model => model.FechaRecibido, new { htmlAttributes = new { @class = "form-control", @type = "date", @readOnly = true } })
                            @Html.ValidationMessageFor(model => model.FechaRecibido, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>

                <div class="form-row col-6" id="divDataEmpresa">
                    <div id="divDueEmpresa" class="row">
                        <div class="form-group col-md-12">
                            @Html.LabelFor(model => model.Empresa.Dueño, "Gerente:", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-9">
                                <label @*class="col-md-12" style="margin-top: 7px;"*@>@ViewBag.Dueño</label>
                            </div>
                        </div>
                    </div>
                    <div id="divCURPEmpresa" class="row">
                        <div class="form-group col-md-12">
                            @Html.LabelFor(model => model.Empresa.CURP, "CURP:", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <label @*class="col-md-12" style="margin-top: 7px;"*@>@ViewBag.CURP</label>
                            </div>
                        </div>
                    </div>
                    <div id="divRFCEmpresa" class="row">
                        <div class="form-group col-md-12">
                            @Html.LabelFor(model => model.Empresa.RFC, "RFC:", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <label @*class="col-md-12" style="margin-top: 7px;"*@>@ViewBag.RFC</label>
                            </div>
                        </div>
                    </div>
                    <div id="divTelEmpresa" class="row">
                        <div class="form-group col-md-12">
                            @Html.LabelFor(model => model.Empresa.Telefono, "Teléfono:", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <label @*class="col-md-12" style="margin-top: 7px;"*@>@ViewBag.Telefono</label>
                            </div>
                        </div>
                    </div>
                    <div id="divDirEmpresa" class="row">
                        <div class="form-group col-md-12">
                            @Html.LabelFor(model => model.Empresa.Direccion, "Dirección:", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                <label @*class="col-md-12" style="margin-top: 7px;"*@>@ViewBag.Direccion</label>
                            </div>
                        </div>
                    </div>
                    @*<div id="divRepDatEmpresa" class="row">
                            <div class="form-group col-md-10">
                                @Html.LabelFor(model => model.Empresa.Rep_Datos, "Reposición de Datos:", htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col-md-10">
                                    <label class="col-md-12" style="margin-top: 7px;">@ViewBag.Rep_Datos</label>
                                </div>
                            </div>
                        </div>
                        <div id="divIncFisEmpresa" class="row">
                            <div class="form-group col-md-10">
                                @Html.LabelFor(model => model.Empresa.Incorp_Fiscal, "Reposición de Datos:", htmlAttributes: new { @class = "control-label col-md-2" })
                                <div class="col-md-10">
                                    <label class="col-md-12" style="margin-top: 7px;">@ViewBag.Incorp_Fiscal</label>
                                </div>
                            </div>
                        </div>*@
                </div>
            </div>

            <div id="divDataPrenda">

                <div id="divTHead" class="row">

                    <div id="divThCantidad" class="col-md-1">
                        Cantidad
                    </div>

                    <div id="divThPrenda" class="col-md-9">
                        Prenda
                    </div>

                    <div id="divThPrecio" class="col-md-1">
                        Precio
                    </div>

                    <div id="divThImporte" class="col-md-1">
                        Importe
                    </div>

                </div>
                <div class="TableData">
                    <div id="divTBody" class="row TableBody">

                        <div class="col-md-1 TBody">
                            <div id="divTbCantidad">
                                No.
                            </div>
                        </div>

                        <div class="col-md-9 TBody">
                            <div id="divTbPrenda">
                                Tipo de Prenda : Arreglo
                            </div>
                        </div>

                        <div class="col-md-1 TBody">
                            <div id="divTbPrecio">
                                Cant.
                            </div>
                        </div>

                        <div class="col-md-1 TBody">
                            <div id="divTbImporte">
                                Cant.
                            </div>
                        </div>

                    </div>

                    <div id="divTBody2" class="row TableBody2">

                        <div class="col-md-1 TBody">
                            <div id="divTb1">

                            </div>
                        </div>

                        <div class="col-md-9 TBody">
                            <div id="divTb2Descripcion">
                                Descripción
                            </div>
                        </div>

                        <div class="col-md-1">
                            <button type="button" id="divTb3Edit" class="btn btn-primary nticon divTb3Edit">
                                <i id="icoEdit" class="fas fa-pen notaicon fa-2x"></i>
                            </button>
                        </div>

                        <div class="col-md-1">
                            <button type="button" id="divTb4Delete" class="btn btn-primary nticon">
                                <i id="icoDelete" class="fas fa-trash notaicon fa-2x"></i>
                            </button>
                        </div>

                    </div>

                    <div id="divTFoot" class="row TableFoot">

                        <div class="col-md-10">
                            <div id="divTf1">

                            </div>
                        </div>

                        <div class="col-md-1">
                            <div id="divTfTotal">
                                Total:
                            </div>
                        </div>

                        <div class="col-md-1">
                            <div id="divTfImpTotal">
                                Cant.
                            </div>
                        </div>

                    </div>
                </div>


            </div>

            <div class="form-group ocultar">
                @Html.LabelFor(model => model.Total, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Total, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Total, "", new { @class = "text-danger" })
                </div>
            </div>

            @*<div class="form-group">
                    @Html.LabelFor(model => model.idEmpleado, htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.idEmpleado, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.Total, "", new { @class = "text-danger" })
                    </div>
                </div>*@

            <div id="divAreaBtn" class="row">
                <div class="col-md-3">
                    <button type="button" id="divAbAdd" class="btn btn-primary nticon" data-toggle="modal" data-target="#AddPrenda">
                        <i id="icoAdd" class="fas fa-socks notaicon fa-3x"></i>
                    </button>
                </div>

                <div class="col-md-3">
                    <button type="button" id="divAbPay" class="btn btn-primary nticon ocultar">
                        <i id="icoPay" class="fas fa-money-bill-wave notaicon fa-3x"></i>
                    </button>
                </div>

                <div class="col-md-3">
                    <button type="button" id="divAbPrint" class="btn btn-primary nticon ocultar">
                        <i id="icoPrint" class="fas fa-print notaicon fa-3x"></i>
                    </button>
                </div>

                <div class="col-md-3">
                    <button type="submit" id="divAbSave" class="btn btn-primary nticon" data-save="true">
                        <i id="icoSave" class="fas fa-save notaicon fa-3x"></i>
                    </button>
                </div>

            </div>
        </div>
    </div>
}

<div class="modal fade" id="EditFecha" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="hdEditFecha">Editar Fecha</h2>
                @*<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>*@
            </div>
            <div class="modal-body">
                <div id="divFechas" class="row">
                    @*<div class="form-group col-md-12">*@
                    @Html.LabelFor(model => model.FechaRecibido, "Fecha de Recibido:", htmlAttributes: new { @class = "control-label col-md-4" })
                    <div class="form-group col-md-8">

                        <input class="form-control text-box single-line" data-val="true" data-val-date="El campo FechaRecibido debe ser una fecha." data-val-required="El campo FechaRecibido es obligatorio." id="inpFechaRecibido" name="inpFechaRecibido" type="date" value="">
                    </div>
                    @*</div>*@
                    @*<div class="form-group">
                            <div class="col-md-offset-2 col-md-10">
                                <button type="submit" class="btn btn-primary" data-notafecha="true">Guardar</button>
                                  <input type="submit" value="Aceptar" class="btn btn-default" />
                            </div>
                        </div>*@
                </div>
                @*<input type="date" id="FechaEntr" class="form-control" />*@
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                <button type="submit" class="btn btn-primary" data-notafecha="true">Guardar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="AddCliente" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="FindCliente">Buscar Cliente</h2>
                @*<button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>*@
            </div>
            <div class="modal-body">
                <div id="divClienteSelect">
                    <div id="divNomCliente" class="row">
                        @Html.LabelFor(model => model.idClientes, "Busqueda del Cliente:", htmlAttributes: new { @class = "control-label col-md-4" })
                        <div class="dl-horizontal col-md-8" id="idClientes">
                            @Html.DropDownList("idClientes", null, htmlAttributes: new { @class = "form-control addCliente", @placeholder = "Seleccionar Cliente" })
                            @Html.ValidationMessageFor(model => model.idClientes, "", new { @class = "text-danger" })
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
                <button type="button" id="btnClienteAdd" class="btn btn-primary">
                    @*<i id="icoAdd" class="fas fa-check-circle notaicon fa-1x"></i>*@
                    Aceptar
                </button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="AddPrenda" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            @*<div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Agregar Prenda</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>*@
            <div class="modal-body">
                @{Html.RenderAction("Create", "NotaPrenda");}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="EditPrenda" data-backdrop="static" data-keyboard="false" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            @*<div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Agregar Prenda</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>*@
            <div class="modal-body ">
                <h2>Editar Prenda</h2>
                <div class="form-horizontal">
                    @using (Html.BeginForm("Edit", "NotaPrenda", FormMethod.Post, new { @class = "formulario-lote_veneno" }))
                    {
                        <div class="EditBody2">

                        </div>

                        <div>
                            <div class="form-group">
                                <div class="col-md-offset-2 col-md-10">
                                    <button type="submit" class="btn btn-primary" data-notaprendaedit="true">Guardar</button>

                                </div>
                            </div>
                        </div>

                    }



                    @*<hr>
                        <div class="form-group">
                            @Html.Label("Prendas", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownList("idTipoPrendaEdit", null, "Seleccionar opción", htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>
                        <div class="col-md-10">
                            <select class="form-control" id="idTipoPrendaE" name="idTipoPrenda"></select>
                            <span class="field-validation-valid text-danger" data-valmsg-for="Prenda.idTipoPrenda" data-valmsg-replace="true"></span>
                        </div>

                        <div class="form-group">
                            @Html.Label("Arreglos", htmlAttributes: new { @class = "control-label col-md-2" })
                            <div class="col-md-10">
                                @Html.DropDownList("idArregloEdit", null, "Seleccionar opción", htmlAttributes: new { @class = "form-control" })
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-2" for="Descripcion">Descripción</label>
                            <div class="col-md-10">
                                <input class="form-control text-box single-line" id="Descripcion" name="Descripcion" type="text" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="Descripcion" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-2" for="Prenda_Cantidad">Precio</label>
                            <div class="col-md-10 precio">
                                <input class="form-control text-box single-line" data-val="true" data-val-number="El campo Cantidad debe ser un número." data-val-required="El campo Cantidad es obligatorio." id="Prenda_Cantidad" name="Prenda.Cantidad" readonly="True" type="text" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="Prenda.Cantidad" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <label class="control-label col-md-2" for="CantidadPrendas">Cantidad</label>
                            <div class="col-md-10">
                                <input class="form-control text-box single-line" data-val="true" data-val-number="El campo CantidadPrendas debe ser un número." data-val-required="El campo CantidadPrendas es obligatorio." id="CantidadPrendas" name="CantidadPrendas" type="number" value="">
                                <span class="field-validation-valid text-danger" data-valmsg-for="CantidadPrendas" data-valmsg-replace="true"></span>
                            </div>
                        </div>

                        <div class="form-group ocultar">
                            <label class="control-label col-md-2" for="idPrenda">idPrenda</label>
                            <div class="col-md-10 ">
                                <input id="idPrenda" name="idPrenda" class="prenda" type="text" value="0">
                            </div>
                        </div>*@


                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>